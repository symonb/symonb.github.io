

<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  <link rel="stylesheet" href="/assets/css/just-the-docs-default.css">

  <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet">

  <style id="jtd-nav-activation">
  

.site-nav > ul.nav-list:first-child > li > a,
.site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(2)) > a,
.site-nav > ul.nav-list:first-child > li > ul > li > ul > li > a {
  background-image: none;
}

.site-nav > ul.nav-list:not(:first-child) a,
.site-nav li.external a {
  background-image: none;
}

.site-nav > ul.nav-list:first-child > li:nth-child(3) > ul > li:nth-child(2) > a {
  font-weight: 600;
  text-decoration: none;
}.site-nav > ul.nav-list:first-child > li:nth-child(3) > button svg,
.site-nav > ul.nav-list:first-child > li:nth-child(3) > ul > li:nth-child(2) > button svg {
  transform: rotate(-90deg);
}.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(3) > ul.nav-list,
.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(3) > ul.nav-list > li.nav-list-item:nth-child(2) > ul.nav-list {
  display: block;
}
  </style>

  

  
    <script src="/assets/js/vendor/lunr.min.js"></script>
  

  <script src="/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  



  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Transformation matrix | SB Blog</title>
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="Transformation matrix" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<link rel="canonical" href="http://localhost:4000/docs/math/rotation%20in%203D/transf_matrix.html" />
<meta property="og:url" content="http://localhost:4000/docs/math/rotation%20in%203D/transf_matrix.html" />
<meta property="og:site_name" content="SB Blog" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Transformation matrix" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","headline":"Transformation matrix","url":"http://localhost:4000/docs/math/rotation%20in%203D/transf_matrix.html"}</script>
<!-- End Jekyll SEO tag -->


  


    <script>
MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']]
    },
    svg: {
      fontCache: 'global'
    }
  };
</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>



</head>

<body>
  <a class="skip-to-main" href="#main-content">Skip to main content</a>
  <svg xmlns="http://www.w3.org/2000/svg" class="d-none">
  <symbol id="svg-link" viewbox="0 0 24 24">
  <title>Link</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
  </svg>
</symbol>

  <symbol id="svg-menu" viewbox="0 0 24 24">
  <title>Menu</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
    <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
  </svg>
</symbol>

  <symbol id="svg-arrow-right" viewbox="0 0 24 24">
  <title>Expand</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
    <polyline points="9 18 15 12 9 6"></polyline>
  </svg>
</symbol>

  <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE -->
<symbol id="svg-external-link" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link">
  <title id="svg-external-link-title">(external link)</title>
  <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line>
</symbol>

  
    <symbol id="svg-doc" viewbox="0 0 24 24">
  <title>Document</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
    <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>
  </svg>
</symbol>

    <symbol id="svg-search" viewbox="0 0 24 24">
  <title>Search</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
    <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
  </svg>
</symbol>

  
  
    <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md -->
<symbol id="svg-copy" viewbox="0 0 16 16">
  <title>Copy</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewbox="0 0 16 16">
    <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"></path>
    <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"></path>
  </svg>
</symbol>
<symbol id="svg-copied" viewbox="0 0 16 16">
  <title>Copied</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewbox="0 0 16 16">
    <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"></path>
    <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"></path>
  </svg>
</symbol>

  
</svg>

  <div class="side-bar">
  <div class="site-header" role="banner">
    <a href="/" class="site-title lh-tight">
  SB Blog

</a>
    <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false">
      <svg viewbox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg>
    </button>
  </div>

  <nav aria-label="Main" id="site-nav" class="site-nav">
  
  
    <ul class="nav-list">
<li class="nav-list-item"><a href="/docs/programming/programming.html" class="nav-list-link">Programming</a></li>
<li class="nav-list-item">
<button class="nav-list-expander btn-reset" aria-label="toggle items in Drone category" aria-pressed="false">
      <svg viewbox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg>
    </button><a href="/docs/drone/drone.html" class="nav-list-link">Drone</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/drone/ESC/ESC_protocols.html" class="nav-list-link">ESC protocols overview</a></li></ul>
</li>
<li class="nav-list-item">
<button class="nav-list-expander btn-reset" aria-label="toggle items in Math category" aria-pressed="false">
      <svg viewbox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg>
    </button><a href="/docs/math/math.html" class="nav-list-link">Math</a><ul class="nav-list">
<li class="nav-list-item"><a href="/docs/math/filters/filters_theory.html" class="nav-list-link">Filters - Theory</a></li>
<li class="nav-list-item"><a href="/docs/math/rotation%20in%203D/transf_matrix.html" class="nav-list-link">Transformation matrix</a></li>
<li class="nav-list-item">
<button class="nav-list-expander btn-reset" aria-label="toggle items in Quaternions category" aria-pressed="false">
            <svg viewbox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg>
          </button><a href="/math/quaternions/" class="nav-list-link">Quaternions</a><ul class="nav-list">
<li class="nav-list-item">
                <a href="/docs/math/quaternions/quaternions_intro.html" class="nav-list-link">Quaternions Intro</a>
              </li>
<li class="nav-list-item">
                <a href="/docs/math/quaternions/quaternions_derivative.html" class="nav-list-link">Quaternion derivative</a>
              </li>
<li class="nav-list-item">
                <a href="/docs/math/quaternions/quaternions_as%20_rotation.html" class="nav-list-link">Quaternions as rotation</a>
              </li>
</ul>
</li>
<li class="nav-list-item"><a href="/docs/math/rotation%20in%203D/lerp_nlerp_slerp.html" class="nav-list-link">LERP, NLERP, SLERP</a></li>
<li class="nav-list-item"><a href="/docs/math/rotation%20in%203D/Euler_Tait_Bryan.html" class="nav-list-link">Euler/Tait-Bryan/yaw-pitch-roll</a></li>
</ul>
</li>
<li class="nav-list-item">
<button class="nav-list-expander btn-reset" aria-label="toggle items in STM32 category" aria-pressed="false">
      <svg viewbox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg>
    </button><a href="/docs/STM32/STM32.html" class="nav-list-link">STM32</a><ul class="nav-list">
<li class="nav-list-item"><a href="/docs/STM32/STM32_develop_1_2.html" class="nav-list-link">STM32 development 1/2</a></li>
<li class="nav-list-item"><a href="/docs/STM32/STM32_develop_2_2.html" class="nav-list-link">STM32 development 2/2</a></li>
<li class="nav-list-item"><a href="/docs/STM32/USB.html" class="nav-list-link">USB with STM32</a></li>
</ul>
</li>
<li class="nav-list-item"><a href="/about/" class="nav-list-link">About</a></li>
</ul>

  
</nav>


  
  
    <footer class="site-footer">
      This site uses <a href="https://github.com/just-the-docs/just-the-docs" target="_blank" rel="noopener noreferrer">Just the Docs</a>, a documentation theme for Jekyll.
    </footer>
  
</div>

  <div class="main" id="top">
    <div id="main-header" class="main-header">
  
    

<div class="search" role="search">
  <div class="search-input-wrap">
    <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search SB Blog" aria-label="Search SB Blog" autocomplete="off">
    <label for="search-input" class="search-label"><svg viewbox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label>
  </div>
  <div id="search-results" class="search-results"></div>
</div>

  
  
  
</div>

    <div class="main-content-wrap">
      <nav aria-label="Breadcrumb" class="breadcrumb-nav">
  <ol class="breadcrumb-nav-list">
    <li class="breadcrumb-nav-list-item"><a href="/docs/math/math.html">Math</a></li>
    <li class="breadcrumb-nav-list-item"><span>Transformation matrix</span></li>
  </ol>
</nav>
      <div id="main-content" class="main-content">
        <main>
          
            <p>The transformation matrix is a much wider concept but for the purpose of orientation in 3D space, we will restrict it to a rotation matrix. So transformation matrix transforms (wow) any vector from one reference frame in the other:</p>

<p>\begin{gather} \mathbf{v}^{(0)}=\mathbf{R}_{1}^{0}\mathbf{v}^{(1)} \end{gather}</p>

<p>The rotation matrix rotates any vector about a specific axis and about a set angle (in this example rotation of vector $\mathbf{v}=\left[\begin{array}{ccc} 1,1,1\end{array}\right]^T$ about $90^{\circ}$  in Z-axis):</p>

\[\begin{gather}\mathbf{v'=\mathbf{R}_z(90^{\circ})\mathbf{v}}=\left[\begin{array}{ccc} 0 &amp; -1 &amp; 0\\ 1 &amp; 0 &amp; 0\\    0 &amp; 0 &amp; 1   \end{array}\right]    \left[\begin{array}{c}1\\ 1\\ 1    \end{array}\right]=     \left[\begin{array}{c}      -1\\    1\\    1    \end{array}\right]
\end{gather}\]

<p>It is important to see the difference between the transformation of a vector between reference frames and the rotation of a vector. These two are related to each other but not the same.</p>

<p>Assuming that a certain reference system ($\pi_1$) is associated with the object, and on each of its axes there are versors (see picture below); additionally, there is a fixed reference system associated with the static environment ($\pi_0$). The transformation matrix from the object-related system ($\pi_1$) to the global system ($\pi_0$) will be equal to the notation of 3 versors, associated with the moving system, in the global frame (\ref{eq:transformation matrix}).</p>

<p>\begin{gather}\label{eq:transformation matrix}  \mathbf{R}_{1}^0=\left[\mathbf{i}^{(0)},\mathbf{j}^{(0)},\mathbf{k}^{(0)}    \right]=    \left[    \begin{array}{ccc}       i_x &amp;j_x &amp; k_x \      i_y &amp; j_y &amp; k_y \       i_z &amp; j_z &amp;k_z    \end{array}    \right]    \end{gather}</p>

<p>Due to the orthogonality of this matrix, its inverse is equal to its transposition:</p>

<p>\begin{gather}\mathbf{R}<em>{1}^{0}\mathbf{R}</em>{0}^{1}= \mathbf{I}\Rightarrow (\mathbf{R}<em>{1}^{0})^{-1}=\mathbf{R}</em>{0}^{1}=(\mathbf{R}_{1}^{0})^{T}\end{gather}</p>

<p>The transformation matrix defines explicitly the orientation and in a very simple way allows to perform the transformation of vectors from one system to another. It is also quite intuitive. Unfortunately, due to numerical inaccuracies, it quickly happens that the matrix is not normalized (loses orthonormality) and it is necessary to normalize it, which is a rather computationally expensive process.</p>

<p>Euler angles can be easily extracted from the transformation matrix. This can be seen very well when one writes the transformation matrix in 3D space as a complex of 3 basic rotations (rotations about 3 principal axes of the global system). For the rotation scheme $Z^{(0)}-Y^{(1)}-X^{(2)}$ (used for the drone) it looks as follows:</p>

<div class="table-wrapper"><table>
  <tbody>
    <tr>
      <td>\begin{gather}\mathbf{R}_{1}^0=\mathbf{R}_z(yaw)\mathbf{R}_y(pitch)\mathbf{R}_x(roll)=\label{eq:euler angle to R}\  \nonumber\    \left</td>
      <td>\mathbf{R}_z(\gamma)=  \left[     \begin{array}{ccc}         \cos{\gamma} &amp; -\sin{\gamma} &amp; 0 \         \sin{\gamma} &amp; \cos{\gamma} &amp; 0 \          0 &amp; 0 &amp; 1     \end{array}     \right]    \mathbf{R}_y(\beta)=\left[\begin{array}{ccc}        \cos{\beta} &amp; 0 &amp; \sin{\beta} \        0 &amp; 1 &amp; 0  \        -\sin{\beta} &amp; 0 &amp; \cos{\beta}    \end{array}     \right] \mathbf{R}_x(\alpha)=    \left[    \begin{array}{ccc}        1 &amp; 0 &amp; 0 \        0 &amp; \cos{\alpha} &amp; -\sin{\alpha}  \        0 &amp; \sin{\alpha} &amp; \cos{\alpha}    \end{array}        \right]    \right</td>
      <td>\nonumber\ \nonumber\   =\left[    \begin{array}{ccc}         \cos{\gamma}\cos{\beta} &amp; \cos{\gamma}\sin{\beta}\sin{\alpha}-\sin{\gamma}\cos{\alpha} &amp; \cos{\gamma}\sin{\beta}\cos{\alpha}+\sin{\gamma}\sin{\alpha}\         \sin{\gamma}\cos{\beta} &amp; \sin{\gamma}\sin{\beta}\sin{\alpha}+\cos{\gamma}\cos{\alpha} &amp;\sin{\gamma}\sin{\beta}\cos{\alpha}-\cos{\gamma}\sin{\alpha} \          -\sin{\beta} &amp; \cos{\beta}\sin{\alpha} &amp; \cos{\beta}\cos{\alpha}     \end{array}  \right] \label{eq:transformation matrix 3D}\end{gather}</td>
    </tr>
  </tbody>
</table></div>

<p>From matrix (\ref{eq:transformation matrix 3D}) Euler angles can be easily extarcted:</p>

<p>\begin{align}       \gamma&amp;=atan2(R_{21},R_{11})\label{eq:matrix trans to yaw}\       \beta&amp;=\arcsin{(-R_{31})}\       \alpha&amp;=atan2(R_{32},R_{33})\label{eq:matrix trans to roll}   \end{align}</p>

<p>You can see here exactly the problem of determining the Euler angles in the surrounding of the singular point ($\beta \rightarrow \pm \frac{\pi}{2}$). It is worth noting that for different conventions of Euler angles the formulas binding the transformation matrix and these angles (\ref{eq:matrix trans to yaw})-(\ref{eq:matrix trans to roll}) will have a different form, but the numerical value of the matrix (\ref{eq:transformation matrix 3D}) will be the same.</p>

          

          
        </main>
        

  <hr>
  <footer>
    

    
<a href="#top" id="back-to-top">Back to top</a>



    
  </footer>


      </div>
    </div>
    
      

<div class="search-overlay"></div>

    
  </div>

  
</body>
</html>


